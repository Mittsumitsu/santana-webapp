# 🏨 サンタナWebアプリ開発ガイドライン

## 📋 プロジェクト概要

**プロジェクト名**: サンタナゲストハウス予約システム  
**バージョン**: Phase 3.2 - ユーザープロフィール機能完成版  
**最終更新**: 2025年6月13日

## ⚡ 開発方針

### 1. 🔧 コード記述ルール

#### **500行以内のコードの場合**
- **全文を記述してください**
- 省略や部分記述は禁止
- 完全に動作する状態でコードを提供
- インポート文、設定、エクスポート文まで含めた完全版

#### **500行以上のコードの修正の場合**
- **何行目のどこをどう置き換えるかを詳細に説明**
- 具体的な行番号を指定
- 置き換え前後のコードを明示
- 修正理由と影響範囲を説明
- 関連ファイルへの影響も考慮

```markdown
例：
ファイル: frontend/src/components/BookingForm.js
行数: 245-267行目
修正内容: プロフィール選択機能の追加

【修正前】
```javascript
// 245行目から
const handleSubmit = async (e) => {
  e.preventDefault();
  // 既存のsubmitロジック
};
```

【修正後】
```javascript
// 245行目から
const handleSubmit = async (e) => {
  e.preventDefault();
  
  // プロフィール保存確認
  if (saveProfile && profileName) {
    await saveUserProfile(formData, profileName);
  }
  
  // 既存のsubmitロジック
};
```
```

### 2. 🚀 本番環境意識

#### **常に本番環境を意識した開発**
- **既存コードを無視した簡易版は作成禁止**
- 現在のコードベースを尊重し、拡張・改良する
- セキュリティ、パフォーマンス、スケーラビリティを考慮
- エラーハンドリングとバリデーションを必須実装

#### **既存機能との互換性維持**
- 新機能追加時は既存機能を破壊しない
- データベース構造変更時は移行計画を立てる
- APIの後方互換性を保つ
- UI/UXの一貫性を維持

### 3. 📚 Github更新プロセス

#### **README.md更新ルール**
「Github更新」と言われた場合：

1. **README.mdを書き換える**
   - 最新の機能追加内容を反映
   - バージョン番号を更新
   - 新機能の説明を追加
   - インストール手順の更新（必要に応じて）

2. **Github更新手順を詳細に説明**
```bash
# 1. 現在の変更を確認
git status
git diff

# 2. 変更をステージング
git add .

# 3. コミット（具体的なメッセージ）
git commit -m "feat: [具体的な機能名] Phase X.X完成

- 新機能1の説明
- 新機能2の説明
- 修正した問題
- パフォーマンス改善点

Version: X.X.X"

# 4. リモートにプッシュ
git push origin main

# 5. プルリクエスト作成（必要に応じて）
# GitHubでPull Requestを作成し、変更内容を詳しく説明
```

#### **コミットメッセージ規則**
```
形式: type: [機能名] Phase X.X完成

詳細説明:
- 具体的な変更内容1
- 具体的な変更内容2
- 修正した問題
- 追加したテスト

Version: X.X.X
Status: [開発中/テスト中/完成]
```

### 4. 💬 チャット管理

#### **適度なタイミングでの区切り提案**
- **長時間の連続作業後は休憩を提案**
- **大きな機能実装完了時に区切りを提案**
- **チャット制限近くになったら整理を提案**

**区切りタイミングの例:**
```
✅ Phase完成時
✅ 主要機能実装完了時  
✅ 500行以上のコード修正完了時
✅ 複数ファイルの修正完了時
✅ テスト完了時
✅ チャットが30回以上になった時
```

**区切り提案の例文:**
```
🎉 Phase 3.X完成！お疲れさまでした！

ここで一度区切りを入れませんか？
次のPhaseに向けて：
1. 現在の成果を整理
2. 次の優先事項を確認  
3. 新しいチャットで継続

現在の進捗をREADME.mdに反映させてGithub更新しますか？
```

## 🎯 開発品質基準

### **コード品質**
- ✅ TypeScriptの型安全性（適用箇所）
- ✅ ESLintルールの遵守
- ✅ プロップバリデーション
- ✅ エラーハンドリング
- ✅ ローディング状態管理
- ✅ レスポンシブデザイン

### **セキュリティ**
- ✅ 入力値サニタイゼーション
- ✅ SQLインジェクション対策
- ✅ 認証・認可の実装
- ✅ プライバシー保護
- ✅ HTTPS通信

### **パフォーマンス**
- ✅ バンドルサイズ最適化
- ✅ 画像最適化
- ✅ 不要な再レンダリング防止
- ✅ キャッシュ戦略
- ✅ データベースクエリ最適化

## 🔧 現在の技術スタック

### **フロントエンド**
- React 19.1.0
- React Router 7.6.0
- Firebase 11.8.1
- Axios 1.9.0
- React DatePicker 8.3.0

### **バックエンド**
- Node.js 22+
- Express.js
- Firebase Admin SDK
- Cloud Firestore

### **インフラ**
- Firebase Authentication
- Firebase Hosting
- Cloud Firestore Database

## 📁 プロジェクト構造

```
santana-webapp/
├── frontend/
│   ├── src/
│   │   ├── components/     # 再利用可能コンポーネント
│   │   ├── pages/         # ページコンポーネント
│   │   ├── hooks/         # カスタムフック
│   │   ├── services/      # API呼び出し
│   │   ├── contexts/      # React Context
│   │   └── styles/        # CSS ファイル
│   └── public/
├── backend/
│   ├── src/
│   │   ├── routes/        # API ルート
│   │   ├── services/      # ビジネスロジック
│   │   ├── utils/         # ユーティリティ
│   │   └── config/        # 設定ファイル
│   └── index.js
└── README.md
```

## 🚨 重要な注意事項

### **絶対に避けること**
- ❌ 既存機能を破壊する変更
- ❌ セキュリティを軽視した実装
- ❌ ハードコードされた値
- ❌ 十分なテストなしのデプロイ
- ❌ 不完全なエラーハンドリング

### **常に意識すること**
- ✅ ユーザー体験の向上
- ✅ コードの可読性と保守性
- ✅ 将来の拡張性
- ✅ チームでの作業効率
- ✅ 本番環境での安定性

## 🎊 開発フロー

### **新機能開発時**
1. 既存コードの理解
2. 設計・仕様の確認
3. 段階的実装
4. テスト実行
5. レビュー・修正
6. ドキュメント更新
7. Github更新

### **バグ修正時**
1. 問題の特定・再現
2. 根本原因の分析  
3. 最小限の修正実装
4. 回帰テスト実行
5. 影響範囲の確認
6. ドキュメント更新

---

**このガイドラインに従って、高品質で保守性の高いサンタナWebアプリを開発しましょう！** 🚀

*最終更新: 2025年6月13日*